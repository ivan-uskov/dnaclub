{% extends 'layout.html.twig' %}
{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('bundles/app/plugins/bootstrap-datepicker/dist/css/bootstrap-datepicker3.min.css') }}" type="text/css" rel="stylesheet" />
{% endblock %}
{% block pageH1 %}
    {% if isNew %}
        Добавление клиента
    {% else %}
        Редактирование клиента
    {% endif %}
{% endblock %}
{% block content %}
    {% if not isNew %}
        <h3>
            <a href="{{ path('diseaseHistory', {'clientId': client.getClientId()}) }}">Перейти к истории болезни</a>
        </h3>
    {% endif %}
    <form action="" method="post">
        <div class="form-group">
            <label for="lastName">Фамилия</label>
            <input class="form-control" type="text" name="last_name" id="lastName"
                    {% if not isNew %}
                        value="{{ client.getLastName() }}"
                    {% endif %}
                    />
        </div>
        <div class="form-group">
            <label for="firstName">Имя</label>
            <input class="form-control" type="text" name="first_name" id="firstName"
                    {% if not isNew %}
                        value="{{ client.getFirstName() }}"
                    {% endif %}
                    />
        </div>
        <div class="form-group">
            <label for="middleName">Отчество</label>
            <input class="form-control" type="text" name="middle_name" id="middleName"
                    {% if not isNew %}
                        value="{{ client.getMiddleName() }}"
                    {% endif %}
                    />
        </div>
        <div class="form-group">
            <label for="birthday">Дата рождения</label>
            <input class="form-control datepicker" type="text" name="birthday" id="birthday"
                    {% if not isNew and (not client.getBirthday() == null) %}
                        value="{{ client.getBirthday()|date('d.m.Y') }}"
                    {% endif %}
                    />
        </div>
        <div class="form-group">
            <label for="city">Город</label>
            <input class="form-control" type="text" name="city" id="city"
                    {% if not isNew %}
                        value="{{ client.getCity() }}"
                    {% else %}
                        value="Йошкар-Ола"
                    {% endif %}
                    />
        </div>
        <div class="form-group">
            <input type="checkbox" name="is_subscribed" id="isSubscribed"
                    {% if not isNew and client.getIsSubscribed() %}
                        checked="checked"
                    {% endif %}
                    />
            <label for="isSubscribed">Участвует в маркетинге</label>
        </div>
        <div class="form-group">
            <input type="checkbox" name="is_school_learner" id="isSchoolLearner"
                    {% if not isNew and client.getIsSchoolLearner() %}
                        checked="checked"
                    {% endif %}
                    />
            <label for="isSchoolLearner">Обучается в школе</label>
        </div>
        <div class="form-group">
            <input type="checkbox" name="is_online_learner" id="isOnlineLearner"
                    {% if not isNew and client.getIsOnlineLearner() %}
                        checked="checked"
                    {% endif %}
                    />
            <label for="isOnlineLearner">Обучается онлайн</label>
        </div>
        <div class="form-group">
            <label for="phone">Телефон</label>
            <input class="form-control" type="text" name="phone" id="phone"
                    {% if not isNew %}
                        value="{{ client.getPhone() }}"
                    {% endif %}
                    />
        </div>
        <div class="form-group">
            <label for="email">E-mail</label>
            <input class="form-control" type="text" name="email" id="email"
                    {% if not isNew %}
                        value="{{ client.getEmail() }}"
                    {% endif %}
                    />
        </div>
        <div class="form-group">
            <label for="subscriptionDate">Дата подписки</label>
            <input class="form-control datepicker" type="text" name="subscription_date" id="subscriptionDate"
                    {% if not isNew and (not client.getSubscriptionDate() == null) %}
                        value="{{ client.getSubscriptionDate().format("Y-m-d H:i:s") }}"
                    {% endif %}
                    />
        </div>
        <div class="form-group">
            <label for="notes">Заметки</label>
            <textarea id="notes" name="notes" class="form-control" rows="3">{#
                #}{% if not isNew %}{#
                    #}{% for note in clientNotes %}{#
                        #}{{ note }}{#
                    #}{% endfor %}{#
                #}{% endif %}{#
            #}</textarea>
        </div>
        <button type="submit" id="submit" class="btn btn-default">
            {% if isNew %}
                Добавить
            {% else %}
                Сохранить
            {% endif %}
        </button>
    </form>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/app/plugins/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js') }}"></script>
    <script src="{{ asset('bundles/app/plugins/bootstrap-datepicker/dist/locales/bootstrap-datepicker.ru.min.js') }}"></script>

    <script>
        $('.datepicker').datepicker({
            format: 'dd.mm.yyyy',
            weekStart: 1,
            autoclose: true,
            language: 'ru'
        });
    </script>
{% endblock %}