{% extends 'layout.html.twig' %}
{% block pageH1 %}Редактирование продажи{% endblock %}
{% block content %}
  <form action="{{ path('editOrderAjax', {'orderId': order.getOrderId()}) }}" method="post" id="createOrderForm">
    <div class="form-group">
      <label for="userName">ФИО</label>
      <select id="userName" name="user_name" class="form-control">
        {% for client in clients %}
          <option
            value="{{ client.getClientId() }}"
            {% if client.getClientId() == order.getClient().getClientId() %}
              selected
            {% endif %}
          >
            {{ client.getName() }}
          </option>
        {% endfor %}
      </select>
    </div>
    <div class="form-group">
      <label for="products">Товары - общая стоимость <span id="coast">{{ order.getSum() }}</span> руб.</label>
      {% include 'include/product/selection_block.html.twig' with productBlockVars %}
    </div>
    <div class="form-group">
      <label for="discount">Скидка</label>
      <input class="form-control" type="text" name="discount" id="discount" value="{{ order.getDiscount() }}" />
    </div>
    <div class="form-group">
      <label for="paidByCash">Оплачено наличными</label>
      <input class="form-control" type="text" name="paidByCash" id="paidByCash" value="{{ orderPayment.getSum() }}" />
    </div>
    <div class="form-group">
      <label for="debt">Долг</label>
      <input class="form-control" type="text" name="debt" id="debt" readonly value="{{ order.getDebt() * -1 ?: 0 }}" />
    </div>
    <input type="hidden" id="productsInfo" name="products_info" value="" />
    <input type="hidden" id="cost" name="cost" value="{{ order.getSum() }}" />
    <button type="submit" id="submit" class="btn btn-default">Сохранить</button>
  </form>
{% endblock %}
{% block javascripts %}
  <script src="{{ asset('js/lib/bootstrap.typeahead.js') }}"></script>
  <script src="{{ asset('js/ui-kit/NumberFormField.class.js') }}"></script>
  <script src="{{ asset('js/ui-kit/ProductSelectionBlock.class.js') }}"></script>
  <script src="{{ asset('js/orders/CreateOrderPage.js') }}"></script>
{% endblock %}
{% block stylesheets %}
  <link rel="stylesheet" type="text/css" href="{{ asset('css/orders/manage.css') }}" />
  <link rel="stylesheet" type="text/css" href="{{ asset('css/ui-kit/product_selection_block.css') }}" />
{% endblock %}